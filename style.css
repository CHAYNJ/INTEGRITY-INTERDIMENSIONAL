/* =================================================
   FULL STYLE â€” INTEGRITY INTERDIMENSIONAL
================================================= */

/* RESET & BASE */
* { box-sizing: border-box; }
html, body {
  margin:0;
  padding:0;
  height:100%;
  width:100%;
  background:#0f0f12;
  color:#fff;
  font-family: 'Helvetica Neue', Arial, sans-serif;
  -webkit-font-smoothing:antialiased;
}
a { color: inherit; }

/* BACKGROUND ORBS */
#background {
  position: fixed;
  inset:0;
  z-index:-1;
  overflow:hidden;
  background: radial-gradient(ellipse at center, rgba(10,10,12,1) 0%, rgba(3,3,5,1) 60%);
}
.galaxy {
  position:absolute;
  border-radius:50%;
  opacity:0.35;
  filter: blur(20px) saturate(120%);
}
.galaxy.a { width:420px; height:420px; left:-80px; top:-60px; background: radial-gradient(circle,#2cf2ff 0%, #7b5cff 60%); animation: drift 60s linear infinite; }
.galaxy.b { width:320px; height:320px; right:-60px; bottom:40px; background: radial-gradient(circle,#ff7bff 0%, #73e6ff 60%); animation: drift 70s linear infinite reverse; }
.galaxy.c { width:260px; height:260px; left:20%; top:40%; background: radial-gradient(circle,#ffd86b 0%, #ff7b66 60%); animation: drift 65s linear infinite; }

@keyframes drift {
  0%{transform:translate(0,0) scale(1);}
  50%{transform:translate(-40px,-40px) scale(1.02);}
  100%{transform:translate(0,0) scale(1);}
}

/* HEADER */
header { text-align:center; padding:72px 20px 28px 20px; }
.portal-title {
  font-family: 'UnifrakturCook', cursive;
  font-size:42px;
  margin:0;
  letter-spacing:4px;
  color:#f2f2f2;
  display:inline-block;
}
.subtitle {
  margin-top:14px;
  font-size:18px;
  color:#e9e9e9;
  line-height:1.3;
  max-width:980px;
  margin-left:auto;
  margin-right:auto;
}

/* FLAME ANIMATION */
.flame {
  display:inline-block;
  margin:0 6px;
  animation: flameFlicker 1.6s infinite ease-in-out;
  color:#ff9b30;
  text-shadow:0 0 8px #ffd, 0 0 20px #ffb366;
}
@keyframes flameFlicker {
  0%{transform:scale(1);opacity:1}
  50%{transform:scale(1.08) rotate(-2deg);opacity:0.9}
  100%{transform:scale(1);opacity:1}
}

/* PORTAL GRID: 3 rows x 4 columns */
.portal-container {
  display:grid;
  grid-template-columns: repeat(4, 1fr);
  gap:22px;
  justify-content:center;
  align-items:center;
  padding:28px 80px;
  max-width:1200px;
  margin:30px auto;
}

/* PORTAL BUTTONS */
.portal, .portal-button {
  -webkit-appearance:none;
  border:none;
  background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
  width:140px;
  height:140px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-family:'UnifrakturCook', cursive;
  font-size:14px;
  color:#fff;
  text-align:center;
  padding:12px;
  cursor:pointer;
  border:2px solid rgba(255,155,48,0.9);
  box-shadow: 0 6px 18px rgba(0,0,0,0.6), inset 0 -6px 12px rgba(0,0,0,0.3);
  transition: transform .22s ease, box-shadow .22s ease, filter .22s ease;
  position: relative; /* for tooltip */
}
.portal:focus, .portal-button:focus { outline: 3px solid rgba(255,155,48,0.18); outline-offset:4px; }
.portal:hover, .portal-button:hover {
  transform: translateY(-6px) scale(1.05);
  box-shadow: 0 20px 40px rgba(255,155,48,0.08), 0 0 30px rgba(255,155,48,0.12);
  filter: saturate(115%);
}

/* visually indicate portals that have content */
.portal.has-content::after, .portal-button.has-content::after {
  content: '';
  display:block;
  width:8px;
  height:8px;
  background:#73e6ff;
  border-radius:50%;
  position:relative;
  margin-top:8px;
  opacity:0.85;
}

/* ================= AQUARIAN TOOLTIP FOR PORTAL-BUTTON ================= */
.portal-button[data-tip]:hover::after {
  content: attr(data-tip);
  position: absolute;
  bottom: 120%;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(255,155,48,0.95);
  color: #121212;
  padding: 6px 12px;
  border-radius: 6px;
  font-size: 13px;
  white-space: nowrap;
  pointer-events: none;
  opacity: 1;
  z-index: 999;
  box-shadow: 0 0 12px rgba(255,155,48,0.45);
  backdrop-filter: blur(4px);
  animation: tooltipFade 0.16s ease-out;
}
@keyframes tooltipFade {
  from { opacity: 0; transform: translateX(-50%) translateY(6px); }
  to   { opacity: 1; transform: translateX(-50%) translateY(0); }
}

/* FOOTER */
footer { text-align:center; padding:26px 12px; color:#cfcfcf; font-size:13px; }

/* ================= MODAL / TOC STYLES ================= */
#toc-root { position:fixed; inset:0; z-index:9999; pointer-events:none; }
.toc-modal {
  pointer-events:auto;
  position: absolute;
  left:50%; top:8%;
  transform:translateX(-50%);
  width: min(1100px, 92%);
  max-height: 82vh;
  background: linear-gradient(180deg, rgba(12,12,14,0.96), rgba(8,8,10,0.98));
  border-radius:12px;
  padding:18px;
  box-shadow: 0 30px 80px rgba(0,0,0,0.7);
  color:#fff;
  overflow:auto;
}
.toc-header { display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:8px; }
.toc-header h2 { margin:0; font-family:'UnifrakturCook', cursive; font-size:24px; }
.toc-close { background:transparent; border:none; color:#fff; font-size:18px; cursor:pointer; padding:8px; border-radius:6px; }
.toc-body { margin-top:8px; }
.toc-list { list-style:decimal; padding-left:1.2rem; margin:0; }
.toc-item { margin:8px 0; }
.toc-link { background:transparent; border:none; color:#fff; font-weight:700; cursor:pointer; padding:8px 6px; text-align:left; width:100%; font-size:15px; }
.toc-link:hover { color:#ffb366; text-decoration:underline; }
.story-article h3 { margin-top:0; font-family:'UnifrakturCook', cursive; font-size:20px; }
.story-content { margin-top:12px; color:#e9e9e9; line-height:1.5; font-size:15px; }

/* footer area inside modal */
.toc-footer { margin-top:14px; display:flex; gap:12px; align-items:center; justify-content:flex-end; }
.open-archive { background:#ff9b30; color:#121212; padding:8px 12px; border-radius:8px; text-decoration:none; font-weight:700; }

/* SMALL SCREENS: responsive adjustments */
@media (max-width: 900px) {
  .portal-container { grid-template-columns: repeat(3, 1fr); padding:20px; }
  .portal, .portal-button { width:120px; height:120px; }
}
@media (max-width: 560px) {
  .portal-container { grid-template-columns: repeat(2, 1fr); padding:18px; gap:14px; }
  .portal, .portal-button { width:100px; height:100px; font-size:13px; }
  .portal-title { font-size:32px; }
  .subtitle { font-size:15px; }
  .toc-modal { top:6%; width:94%; max-height:86vh; padding:12px;}
}

/* === FIX UNIVERSE BACKGROUND LAYERING === */
#background {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  z-index: -5; /* pushes universe behind all content */
  pointer-events: none;
}

.galaxy {
  position: absolute;
  width: 200%;
  height: 200%;
  top: -50%;
  left: -50%;
  background: radial-gradient(circle at center,
    rgba(255,255,255,0.6) 0%,
    rgba(255,255,255,0.1) 20%,
    rgba(0,0,0,0) 60%);
  filter: blur(40px);
  animation: drift 80s linear infinite;
  opacity: 0.25; /* faint star-glow behind portals */
}

@keyframes drift {
  from { transform: rotate(0deg) scale(1); }
  to   { transform: rotate(360deg) scale(1.15); }
}
